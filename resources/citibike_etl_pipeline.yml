resources:
  pipelines:
    citibike_etl_pipeline:
      name: citibike_etl_pipeline
      
      permissions:
        - service_principal_name: 670c6c53-8a21-4c10-bf37-d7df8170f664
          level: CAN_MANAGE
        - service_principal_name: 04065a1c-4e36-43f9-832a-31c31071252f
          level: CAN_MANAGE
          
      catalog: "${var.catalog}"
      schema: default
      edition: ADVANCED

      libraries:
        - notebook:
            path: ../citibike_etl/dlt/01_bronze/01_bronze_citibike.ipynb
        - notebook:
            path: ../citibike_etl/dlt/02_silver/02_silver_citibike.ipynb
        - notebook:
            path: ../citibike_etl/dlt/03_gold/03_gold_citibike_daily_ride_summary.ipynb
        - notebook:
            path: ../citibike_etl/dlt/03_gold/03_gold_citibike_daily_station_performance.ipynb

      continuous: false
      development: "${var.dev_flag}"
      photon: true
      serverless: true
      channel: CURRENT

      configuration:
        catalog: "${var.catalog}"
